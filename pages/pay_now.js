"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(e,t,r){return t&&n(e.prototype,t),r&&n(e,r),e}}(),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_api=require("./../api/api.js"),_api2=_interopRequireDefault(_api),_sureorder=require("./../components/order/sureorder.js"),_sureorder2=_interopRequireDefault(_sureorder);function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _asyncToGenerator(e){return function(){var i=e.apply(this,arguments);return new Promise(function(u,a){return function t(e,r){try{var n=i[e](r),o=n.value}catch(e){return void a(e)}if(!n.done)return Promise.resolve(o).then(function(e){t("next",e)},function(e){t("throw",e)});u(o)}("next")})}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var payNow=function(){function a(){var e,t,r;_classCallCheck(this,a);for(var n=arguments.length,o=Array(n),u=0;u<n;u++)o[u]=arguments[u];return(t=r=_possibleConstructorReturn(this,(e=a.__proto__||Object.getPrototypeOf(a)).call.apply(e,[this].concat(o)))).config={navigationBarTitleText:"确认订单"},r.$repeat={},r.$props={sureorder:{buyType:"buynow","xmlns:v-bind":"","v-bind:studentInfo.sync":"student"}},r.$events={},r.components={sureorder:_sureorder2.default},r.data={productId:0,buff:"",buyNum:1,couponId:0,student:null},r.methods={},r.events={},_possibleConstructorReturn(r,t)}var e;return _inherits(a,_wepy2.default.page),_createClass(a,[{key:"onLoad",value:function(e){var t=this;t.productId=e.pId||0,t.couponId=e.couponId||0,t.buff=e.buff||"",t.buyNum=e.buy_num||1,t.getProductDetail()}},{key:"onShow",value:function(){this.student=this.$parent.globalData.student||null,this.$apply(),console.log("=================>>>>>>",this.student)}},{key:"onUnload",value:function(){console.log("=============== onupload"),this.$parent.globalData.student=null}},{key:"getProductDetail",value:(e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var t,r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=(t=this).$parent.globalData.userInfo.id,console.log(r,t.productId,t.buff,t.buyNum),e.next=5,_api2.default.payNowDetail({query:{pid:t.productId,uid:r,buff:t.buff,num:t.buyNum}});case 5:n=e.sent,console.log("=====> pay now ",n),1==n.data.status&&(console.log("=====> 父组件发送更新消息"),t.$broadcast("updatePayInfo",n.data));case 8:case"end":return e.stop()}},e,this)})),function(){return e.apply(this,arguments)})}]),a}();Page(require("./../npm/wepy/lib/wepy.js").default.$createPage(payNow,"pages/pay_now"));