"use strict";var uploadFileImg=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var r,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=_api2.default.apiMall+"/wxapp/upload/file",t.next=3,_wepy2.default.uploadFile({url:r,filePath:e,name:"file"});case 3:return n=t.sent,a=JSON.parse(n.data),t.abrupt("return",a);case 6:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),chooseVideo=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(e,r){wx.chooseVideo({sourceType:["album","camera"],maxDuration:15,camera:"back",success:function(t){e(t)},fail:function(t){r(t)}})}));case 1:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),uploadImage=function(){var t=_asyncToGenerator(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),AAA=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function t(e){var r,n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=[],n=0;case 2:if(n<e.length)return t.next=5,uploadFileImg(e[n]);t.next=11;break;case 5:a=t.sent,console.log("... ",a),1==a.status&&r.push({url:a.url,uri:a.uri});case 8:n++,t.next=2;break;case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}},t,this)}));return function(t){return e.apply(this,arguments)}}(),_wepy=require("./../npm/wepy/lib/wepy.js"),_wepy2=_interopRequireDefault(_wepy),_api=require("./../api/api.js"),_api2=_interopRequireDefault(_api);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _asyncToGenerator(t){return function(){var u=t.apply(this,arguments);return new Promise(function(o,i){return function e(t,r){try{var n=u[t](r),a=n.value}catch(t){return void i(t)}if(!n.done)return Promise.resolve(a).then(function(t){e("next",t)},function(t){e("throw",t)});o(a)}("next")})}}function returnFloat(t){var e=(t=Math.round(100*parseFloat(t))/100).toString().split(".");return 1==e.length?t=t.toString()+".00":1<e.length?(e[1].length<2&&(t=t.toString()+"0"),t):void 0}function formatTime(t){var e=new Date(t);return[e.getFullYear(),e.getMonth()+1,e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds()]}function formatTime2(t){var e=formatTime(t);return e[0]+"-"+formatNumber[e[1]]+"-"+formatNumber[e[1]]}function formatTime3(t,e){if((e=e)<=(t=t))return["00","00","00","00"];var r=Math.floor((e-t)/1e3),n=Math.floor(r/86400);r%=86400;var a=Math.floor(r/3600);r%=3600;var o=Math.floor(r/60),i=Math.floor(r%60);return[format(n),format(a),format(o),format(i)]}function formatNumber(t){return(t=t.toString())[1]?t:"0"+t}function format(t){return 10<=t?t:"0"+t}function getTodayDate(){var t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}function div(t,e){var r=void 0,n=void 0;try{r=t.toString().split(".")[1].length}catch(t){}try{n=e.toString().split(".")[1].length}catch(t){}return mul(Number(t.toString().replace(".",""))/Number(e.toString().replace(".","")),Math.pow(10,n-r))}function accAdd(t,e){var r,n=void 0,a=void 0;try{n=t.toString().split(".")[1].length}catch(t){n=0}try{a=e.toString().split(".")[1].length}catch(t){a=0}return((t*(r=Math.pow(10,Math.max(n,a)))+e*r)/r).toFixed(2)}function mul(t,e){var r=0,n=t.toString(),a=e.toString();try{r+=t.toString().split(".")[1].length}catch(t){}try{r+=e.toString().split(".")[1].length}catch(t){}return Number(n.replace(".",""))*Number(a.replace(".",""))/Math.pow(10,r)}function displayProp(t){var e="";for(var r in t)e+=r+t[r];return e}function sortArr(r,n){return n=n||1,r.sort(function(t,e){switch(n){case 1:return t-e;case 2:return e-t;case 3:return Math.random()-.5;default:return r}})}function hasAuthorize(){var t=_wepy2.default.$instance.globalData.userInfo;return console.log("=====>>>> userinfo",t),null!=t||(wx.showModal({title:"提示",content:"您尚未登录，不可以使用该功能，是否前往登录页面",success:function(t){console.log("是否前往授权页面",t),t.confirm&&wx.navigateTo({url:"/pages/authorize"})}}),!1)}function checkIDCard(t){for(var e=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2],r=t+"",n=t[17],a=r.substring(0,17).split(""),o=a.length,i=0,u=0;u<o;u++)i+=a[u]*e[u];var c=["1","0","X","9","8","7","6","5","4","3","2"][i%11],l=/^[1-9][0-9]{5}([1][9][0-9]{2}|[2][0][0|1][0-9])([0][1-9]|[1][0|1|2])([0][1-9]|[1|2][0-9]|[3][0|1])[0-9]{3}([0-9]|[X])$/.test(t);return!(n!==c||!l)}function isIdCardNo(t){var e=""+t;if(!/^\d{17}(\d|x)$/i.test(e)||!/1[1-5]|2[1-3]|3[1-7]|4[1-6]|5[0-4]|6[1-5]|71|8[1-2]|91/.test(e.substr(0,2))||new Date(e.substr(6,4)+"-"+e.substr(10,2)+"-"+e.substr(12,2)).getDate()!=e.substr(12,2))return!1;for(var r=17,n=0,a=e.replace(/x$/i,"a");0<=r;r--)n+=Math.pow(2,r)%11*parseInt(a.charAt(17-r),11);return n%11==1}function getDrawCanvasData(t){var e={};e={canvasData:{top:150,left:142,width:468,height:742,comment:"画布大小"},content:[{type:"image-local",url:"/images/backbg.png",top:0,left:0,shape:"square",width:468,height:742,comment:""}]};var r=t.name;""!=r&&e.content.push({type:"text",content:r,top:536,left:34,fontSize:32,lineHeight:32,color:"#3A3A3A",textAlign:"left",weight:"bold",maxWidth:400,lineMax:1}),e.content.push({type:"text",content:"葵花田艺术",top:97,left:165,fontSize:24,lineHeight:24,color:"#747474",textAlign:"left",weight:"400",maxWidth:400,lineMax:1});var n=t.price;if(""!=n){e.content.push({type:"text",content:"￥"+n,top:586,left:34,fontSize:28,lineHeight:28,color:"#ff3b30",textAlign:"left",weight:"400",maxWidth:400,lineMax:1});var a=t.price_yj;if(""!=a){var o=15*(n.length+1)+44;e.content.push({type:"text",content:"￥"+a,top:586,left:o,fontSize:20,lineHeight:20,color:"#cccccc",textAlign:"left",weight:"400",maxWidth:400,lineMax:1});var i=15*a.length+o;e.content.push({type:"line",x1:o,y1:580,x2:i,y2:580,color:"#cccccc"})}}var u=t.desc;""!=u&&e.content.push({type:"text",content:u,top:630,left:34,fontSize:26,lineHeight:32,color:"#999999",textAlign:"left",weight:"400",maxWidth:250,lineMax:3});var c=t.photo;return""!=c&&e.content.push({type:"image",url:c,top:104,left:74,shape:"square",width:320,height:320,comment:""}),e.content.push({type:"image-local",url:"/images/logo.png",top:64,left:120,shape:"square",width:44,height:44,comment:""}),e.content.push({type:"text",content:"长按识别小程序码",top:688,left:318,fontSize:14,lineHeight:14,color:"#999999",textAlign:"left",weight:"400",maxWidth:250,lineMax:3}),""!=_wepy2.default.$instance.globalData.code&&e.content.push({type:"image",url:_wepy2.default.$instance.globalData.code,top:550,left:314,shape:"square",width:120,height:120,comment:""}),e}function getGlobalData(){return _wepy2.default.$instance.globalData}function getVip(){var t=_wepy2.default.$instance.globalData;return t.userInfo?t.userInfo.vip:0}module.exports={hasAuthorize:hasAuthorize,returnFloat:returnFloat,accAdd:accAdd,uploadFileImg:uploadFileImg,checkIDCard:checkIDCard,isIdCardNo:isIdCardNo,formatTime:formatTime,formatTime2:formatTime2,formatTime3:formatTime3,chooseVideo:chooseVideo,getTodayDate:getTodayDate,uploadImage:uploadImage,getDrawCanvasData:getDrawCanvasData,sortArr:sortArr,getVip:getVip,getGlobalData:getGlobalData};